<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aviator</title>
    
    <style>
        /* Base Styles for Mobile Screen */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000; /* General page color black for game */
            color: white;
            overflow: hidden; /* Ensure content fits phone screen */
        }

        .screen {
            width: 100%;
            max-width: 450px; /* Typical phone width constraint */
            height: 100vh;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            padding: 10px;
        }

        .hidden {
            display: none !important;
        }

        /* === A. LOGIN SCREEN STYLES === */
        #login-screen {
            background-color: #007bff; /* Blue color for login system page */
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .login-header {
            margin-bottom: 40px;
        }

        .login-title {
            font-size: 3em;
            text-align: center;
            color: white;
        }

        .prompt-box, .auth-form {
            width: 100%;
            max-width: 300px;
        }

        .action-box {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
        }

        .create-btn { background-color: #28a745; color: white; }
        .login-btn { background-color: #ffc107; color: #333; }

        .auth-form h2 { text-align: center; margin-bottom: 20px; color: white; }
        .auth-form input[type="tel"],
        .auth-form input[type="password"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: none;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .password-group {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-group input {
            padding-right: 70px; /* Make space for button */
        }

        .toggle-password {
            position: absolute;
            right: 5px;
            padding: 5px 8px;
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
        }

        .save-checkbox {
            display: block;
            margin-bottom: 20px;
            color: white;
            font-size: 0.9em;
        }

        .submit-btn {
            background-color: #20993d;
            color: white;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
        }


        /* === B. GAME FIELD STYLES === */
        #game-screen {
            justify-content: flex-start;
            padding: 10px;
            background-color: black;
            color: white;
        }

        .game-bar {
            height: 10%; /* Top section approximation */
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 5px;
        }

        .status-box {
            height: 100%;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            box-sizing: border-box;
            min-height: 50px;
        }

        /* Withdrawal Bar specific styles */
        #withdraw-bar {
            width: 48%;
            background-color: #ffc107; /* Yellow */
            color: #333;
            position: relative;
            overflow: hidden;
            transition: height 0.3s;
        }
        
        #withdraw-bar.expanded {
            height: 100px; /* Adjust height when input is visible */
        }

        #withdraw-display {
            font-size: 1.1em;
            z-index: 2;
        }

        #withdraw-input-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffc107;
            display: none; /* Controlled by JS */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 5px;
            box-sizing: border-box;
        }

        #withdraw-amount {
            width: 90%;
            margin-bottom: 5px;
            padding: 5px;
            border: none;
            border-radius: 4px;
            text-align: center;
        }

        #withdraw-proceed {
            width: 90%;
            padding: 5px;
            border: none;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        /* Balance Bar specific styles */
        #balance-bar {
            width: 48%;
            background-color: #28a745; /* Green */
            color: white;
        }

        /* Plane Area (50% Middle) */
        .plane-area {
            height: 60vh; /* Takes most of remaining space (approx 50% of the screen height) */
            width: 100%;
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: flex-start;
            align-items: flex-end;
        }

        /* Live Multiplier Display */
        #live-multiplier {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            font-weight: bold;
            color: white;
            z-index: 10;
            transition: color 0.1s;
        }

        /* Aviator Plane Placeholder */
        #aviator-plane {
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            bottom: 5%;
            left: 5%;
            transition: transform 0.1s linear; /* Smooth plane movement */
        }
        
        /* Bottom Area (25% Bottom) */
        .bottom-area {
            height: 30vh; /* Remaining space */
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }

        #past-multipliers {
            width: 100%;
            padding: 5px 0;
            font-size: 0.8em;
            background-color: #222;
            text-align: center;
            border-radius: 4px;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow-x: auto;
        }

        .betting-controls {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            height: 100px;
        }

        .control-box {
            height: 100%;
            padding: 10px;
            border-radius: 8px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            font-weight: bold;
            justify-content: center;
            align-items: center;
        }

        /* STAKE BOX */
        .control-box:first-child {
            width: 48%;
            background-color: #333;
            color: white;
        }

        .stake-input {
            width: 90%;
            padding: 8px;
            margin-top: 5px;
            border: none;
            border-radius: 4px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* BET BUTTON / CASHOUT / CANCEL */
        .bet-btn {
            width: 48%;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .bet-top-text {
            font-size: 1.4em;
        }

        .bet-bottom-text {
            font-size: 1.1em;
            margin-top: 5px;
        }

        /* State Colors */
        .green { background-color: #28a745; color: white; } /* BET */
        .yellow { background-color: #ffc107; color: #333; } /* CASH OUT */
        .red { background-color: #dc3545; color: white; } /* CANCEL / Waiting */
        .blue-btn { background-color: #007bff; color: white; } /* PROCEED */
    </style>
</head>
<body>

    <div id="login-screen" class="screen active">
        <header class="login-header">
            <h1 class="login-title">AVIATOR</h1>
        </header>
        
        <div id="initial-prompt" class="prompt-box">
            <button class="action-box create-btn" onclick="showCreateAccount()">Create Account</button>
            <button class="action-box login-btn" onclick="showLogin()">Log In</button>
        </div>

        <div id="create-form" class="auth-form hidden">
            <h2>Create Account</h2>
            <input type="tel" id="create-phone" placeholder="1. Enter Phone Number">
            
            <div class="password-group">
                <input type="password" id="create-password" placeholder="2. Enter Password">
                <button class="toggle-password" onclick="togglePassword('create-password')">Show</button>
            </div>
            
            <div class="password-group">
                <input type="password" id="confirm-password" placeholder="3. Confirm Password">
            </div>

            <label class="save-checkbox">
                <input type="checkbox" id="create-save-password"> Can save Password to browser (Optional)
            </label>
            
            <button class="submit-btn" onclick="handleAccountCreation()">CREATE & PLAY</button>
        </div>

        <div id="login-form" class="auth-form hidden">
            <h2>Player Login</h2>
            <input type="tel" id="login-phone" placeholder="Phone Number">
            
            <div class="password-group">
                <input type="password" id="login-password" placeholder="Password">
                <button class="toggle-password" onclick="togglePassword('login-password')">Show</button>
            </div>

            <label class="save-checkbox">
                <input type="checkbox" id="login-save-password"> Can save Password to browser (Optional)
            </label>
            
            <button class="submit-btn" onclick="handleLogin()">LOG IN</button>
        </div>
    </div>


    <div id="game-screen" class="screen hidden">
        
        <div class="game-bar top-bar">
            <div id="withdraw-bar" class="status-box yellow" onclick="toggleWithdrawInput()">
                <div id="withdraw-display">WIDTHRAW</div>
                <div id="withdraw-input-area">
                    <input type="number" id="withdraw-amount" placeholder="Enter amount" min="0">
                    <button id="withdraw-proceed" class="blue-btn" onclick="handleWithdraw(event)">PROCEED</button>
                </div>
            </div>
            
            <div id="balance-bar" class="status-box green">
                BALANCE: <span id="current-balance">0.00</span>
            </div>
        </div>

        <div id="plane-box" class="plane-area">
            <div id="live-multiplier">WAITING...</div>
            <div id="aviator-plane" class="plane"></div>
        </div>
        
        <div class="bottom-area">
            
            <div id="past-multipliers">
                Past 10 Multipliers: <span id="multiplier-list">--</span>
            </div>

            <div class="betting-controls">
                <div class="control-box">
                    <label for="stake-amount">STAKE</label>
                    <input type="number" id="stake-amount" class="stake-input" min="1" placeholder="10">
                </div>

                <button id="bet-button" class="control-box bet-btn green" onclick="handleBet()">
                    <div class="bet-top-text">BET</div>
                    <div class="bet-bottom-text" id="bet-amount-display">10</div>
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // =======================================================
        // GLOBAL STATE VARIABLES
        // =======================================================
        const NAIROBI_TIME_OFFSET_MS = 3 * 60 * 60 * 1000;
        const ROUND_INTERVAL_SECONDS = 30; // 5s prep + 25s max flight
        const FLIGHT_TIME_MAX_SECONDS = 25; 
        const INITIAL_BALANCE = 1000.00;

        let gameState = 'WAITING'; // WAITING, PENDING, FLYING, BURST
        let currentBalance = 0.00;
        let currentStake = 0;
        let multiplier = 1.00;
        let generatedMultiplier = 1.00;
        let roundStartTime = 0; // The timestamp when the 30s cycle began
        let flightStartTimestamp = 0; // The timestamp when the plane started moving

        let gameInterval = null;
        let liveMultiplierList = []; // Past multipliers history

        // DOM Elements
        const loginScreen = document.getElementById('login-screen');
        const gameScreen = document.getElementById('game-screen');
        const balanceDisplay = document.getElementById('current-balance');
        const betButton = document.getElementById('bet-button');
        const betTopText = betButton.querySelector('.bet-top-text');
        const betBottomText = betButton.querySelector('.bet-bottom-text');
        const stakeInput = document.getElementById('stake-amount');
        const liveMultiplierDisplay = document.getElementById('live-multiplier');
        const multiplierListDisplay = document.getElementById('multiplier-list');
        const aviatorPlane = document.getElementById('aviator-plane');
        const withdrawBar = document.getElementById('withdraw-bar');
        const withdrawInputArea = document.getElementById('withdraw-input-area');
        const withdrawAmountInput = document.getElementById('withdraw-amount');
        const withdrawProceedBtn = document.getElementById('withdraw-proceed');
        const withdrawDisplay = document.getElementById('withdraw-display');
        
        // --- 1. ACCOUNT MANAGEMENT LOGIC ---

        function showCreateAccount() {
            document.getElementById('initial-prompt').classList.add('hidden');
            document.getElementById('create-form').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('initial-prompt').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        }

        function togglePassword(id) {
            const input = document.getElementById(id);
            const btn = input.nextElementSibling;
            if (input.type === 'password') {
                input.type = 'text';
                btn.textContent = 'Hide';
            } else {
                input.type = 'password';
                btn.textContent = 'Show';
            }
        }

        function handleAccountCreation() {
            const phone = document.getElementById('create-phone').value;
            const password = document.getElementById('create-password').value;
            const confirm = document.getElementById('confirm-password').value;

            if (!phone || !password) {
                alert("Please enter phone number and password.");
                return;
            }
            if (password !== confirm) {
                alert("Passwords do not match.");
                return;
            }

            // --- ADMIN PANEL SIMULATION (LocalStorage) ---
            localStorage.setItem('user_phone', phone);
            localStorage.setItem('user_password', password);
            localStorage.setItem('user_balance', INITIAL_BALANCE.toFixed(2));
            // --- END SIMULATION ---

            currentBalance = INITIAL_BALANCE;
            transitionToGame();
        }

        function handleLogin() {
            const phone = document.getElementById('login-phone').value;
            const password = document.getElementById('login-password').value;
            
            // --- ADMIN PANEL SIMULATION (LocalStorage Check) ---
            const storedPhone = localStorage.getItem('user_phone');
            const storedPassword = localStorage.getItem('user_password');
            const storedBalance = localStorage.getItem('user_balance');

            if (phone === storedPhone && password === storedPassword) {
                currentBalance = parseFloat(storedBalance || INITIAL_BALANCE);
                transitionToGame();
            } else {
                alert("Login failed: Phone or Password does not match.");
            }
        }

        function transitionToGame() {
            loginScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            balanceDisplay.textContent = currentBalance.toFixed(2);
            startGameLoop();
        }

        // --- 2. MULTIPLIER GENERATION (NON-SERVER) ---

        /** Deterministic PRNG using LCG */
        function simplePRNG(seed) {
            const m = 0x80000000; 
            const a = 1103515245;
            const c = 12345;
            let state = seed;
            state = (a * state + c) % m;
            return state / m; // Normalize to 0-1
        }

        /** Generates a deterministic multiplier based on Nairobi time slice */
        function getGeneratedMultiplier() {
            const nowUtc = Date.now();
            // Use server time simulation if available, otherwise use client time
            const nowNairobi = nowUtc + NAIROBI_TIME_OFFSET_MS;
            
            // Round Seed (unique for every 30-second block)
            const roundSeed = Math.floor(nowNairobi / 1000 / ROUND_INTERVAL_SECONDS);
            let prn = simplePRNG(roundSeed);

            // Aviator-style inverse multiplier function, ensuring min 1.00
            let multiplierValue = 100 / (100 - prn * 99.5);
            
            return Math.max(1.00, parseFloat(multiplierValue.toFixed(2)));
        }

        // --- 3. GAME CYCLE MANAGEMENT ---

        function startGameLoop() {
            // Find the start time of the current 30s cycle
            const now = Date.now();
            const timeSinceEpoch = now + NAIROBI_TIME_OFFSET_MS;
            const cycleDurationMs = ROUND_INTERVAL_SECONDS * 1000;
            
            roundStartTime = now - (timeSinceEpoch % cycleDurationMs);
            generatedMultiplier = getGeneratedMultiplier();

            gameInterval = setInterval(handleGameCycle, 50); // 20 FPS refresh rate
            stakeInput.value = 10;
            document.getElementById('bet-amount-display').textContent = 10;
        }

        function handleGameCycle() {
            const now = Date.now();
            const timeInCycle = (now - roundStartTime) / 1000;
            
            // --- STATE 1: PREP/COUNTDOWN (0s to 5s) ---
            if (timeInCycle < 5) {
                if (gameState !== 'WAITING' && gameState !== 'PENDING') {
                    resetRoundState(); // Transition from BURST to WAITING
                    generatedMultiplier = getGeneratedMultiplier();
                }
                
                let countdown = (5 - timeInCycle).toFixed(1);
                liveMultiplierDisplay.textContent = `NEXT: ${countdown}s`;

            // --- STATE 2: FLIGHT (5s onwards) ---
            } else {
                
                // --- FLIGHT START (Transition from WAITING/PENDING to FLYING) ---
                if (gameState === 'WAITING' || gameState === 'PENDING') {
                    
                    if (currentStake > 0) {
                        // Successful Stake: Deduction happens when flight starts
                        currentBalance -= currentStake;
                        localStorage.setItem('user_balance', currentBalance.toFixed(2));
                        balanceDisplay.textContent = currentBalance.toFixed(2);
                        updateBetButton('YELLOW', 'CASH OUT', '0.00'); 
                    } else if (currentStake === 0 && gameState === 'PENDING') {
                        // Edge case: Stake was cancelled but state machine was slow
                        gameState = 'WAITING'; 
                    }

                    // Start the flight
                    gameState = 'FLYING';
                    flightStartTimestamp = now;
                }

                if (gameState === 'FLYING') {
                    const flightTime = (now - flightStartTimestamp) / 1000;
                    
                    // --- LIVE MULTIPLIER CALCULATION ---
                    // Logarithmic/Inverse function for realistic curve growth
                    multiplier = 1.00 + (Math.log(1 + 0.5 * flightTime * flightTime) / Math.log(2)); 
                    multiplier = parseFloat(multiplier.toFixed(2));

                    // Check for Burst Condition
                    if (multiplier >= generatedMultiplier || flightTime > FLIGHT_TIME_MAX_SECONDS) {
                        handleBurst();
                        return;
                    }
                    
                    // Update UI
                    liveMultiplierDisplay.textContent = `× ${multiplier.toFixed(2)}`;
                    updatePlanePosition(flightTime);

                    // Update Winnings in CASH OUT button
                    if (currentStake > 0) {
                        const potentialWinnings = currentStake * multiplier;
                        betBottomText.textContent = potentialWinnings.toFixed(2);
                    }
                }
                
                // --- Cycle Wrap Around Check ---
                if (timeInCycle >= ROUND_INTERVAL_SECONDS) {
                    roundStartTime = now;
                }
            }
        }

        function resetRoundState() {
            if (gameState === 'BURST' || gameState === 'FLYING') {
                liveMultiplierList.unshift(generatedMultiplier);
                updateMultiplierHistory();
            }
            
            gameState = 'WAITING';
            multiplier = 1.00;
            
            updateBetButton('GREEN', 'BET', stakeInput.value || '0');
            liveMultiplierDisplay.textContent = 'WAITING...';
            
            // Reset plane position and style
            aviatorPlane.style.transform = `translate(0%, 0%) scale(1)`;
            liveMultiplierDisplay.style.color = 'white';
        }

        // --- 4. BETTING ACTIONS ---

        function handleBet() {
            const stake = parseFloat(stakeInput.value);

            if (stake <= 0 || isNaN(stake)) {
                alert("Stake must be greater than 0.");
                return;
            }
            if (stake > currentBalance) {
                alert("Insufficient balance for this stake!");
                return;
            }

            // State: WAITING/BURST (Player wants to bet the NEXT round)
            if (gameState === 'WAITING' || gameState === 'BURST') {
                currentStake = stake;
                gameState = 'PENDING';
                updateBetButton('RED', 'CANCEL', 'Waiting for next round');
            
            // State: PENDING (Player cancels the reserved bet)
            } else if (gameState === 'PENDING') {
                currentStake = 0;
                gameState = 'WAITING';
                updateBetButton('GREEN', 'BET', stakeInput.value || '0');
            
            // State: FLYING (Player Cashes Out)
            } else if (gameState === 'FLYING' && currentStake > 0) {
                handleCashOut();
                
            // State: FLYING and currentStake is 0 (Player missed the current round but bets the next)
            } else if (gameState === 'FLYING' && currentStake === 0) {
                currentStake = stake; // Reserve stake for next round
                gameState = 'PENDING';
                updateBetButton('RED', 'CANCEL', 'Waiting for next round');
            }
        }

        function handleCashOut() {
            const winnings = currentStake * multiplier;
            currentBalance += winnings;
            
            // Update UI and state
            localStorage.setItem('user_balance', currentBalance.toFixed(2));
            balanceDisplay.textContent = currentBalance.toFixed(2);
            liveMultiplierDisplay.textContent = `CASHED OUT @ ×${multiplier.toFixed(2)}`;
            liveMultiplierDisplay.style.color = '#ffc107'; // Yellow flash
            
            // End the stake for this round
            currentStake = 0;
            
            // Bet button returns to BET state immediately, ready for the next cycle's PENDING state
            updateBetButton('GREEN', 'BET', stakeInput.value || '0');
            
            // Set state to BURST to prevent losing the stake when the plane inevitably bursts
            gameState = 'BURST';
        }

        function handleBurst() {
            gameState = 'BURST';
            liveMultiplierDisplay.textContent = `BUSTED @ ×${generatedMultiplier.toFixed(2)}`;
            liveMultiplierDisplay.style.color = '#dc3545'; // Red flash
            
            if (currentStake > 0) {
                console.log(`Lost ${currentStake.toFixed(2)}`); // Stake was already deducted
            }

            currentStake = 0;
            
            // The next handleGameCycle loop will execute resetRoundState()
        }
        
        // --- 5. WITHDRAWAL LOGIC ---

        function toggleWithdrawInput() {
            const isExpanded = withdrawInputArea.style.display === 'flex';
            
            if (isExpanded) {
                withdrawInputArea.style.display = 'none';
                withdrawBar.classList.remove('expanded');
                withdrawDisplay.style.display = 'block';
                withdrawAmountInput.value = '';
                withdrawProceedBtn.textContent = 'PROCEED';
            } else {
                withdrawDisplay.style.display = 'none';
                withdrawInputArea.style.display = 'flex';
                withdrawBar.classList.add('expanded');
            }
        }

        function handleWithdraw(event) {
            event.stopPropagation(); // Prevents closing the bar immediately
            const amount = parseFloat(withdrawAmountInput.value);
            
            if (isNaN(amount) || amount <= 0 || amount > currentBalance) {
                alert("Invalid or insufficient withdrawal amount.");
                return;
            }

            // Deduction and UI update
            currentBalance -= amount;
            localStorage.setItem('user_balance', currentBalance.toFixed(2));
            balanceDisplay.textContent = currentBalance.toFixed(2);
            
            withdrawProceedBtn.textContent = 'SUBMITTED';
            withdrawProceedBtn.style.backgroundColor = 'green';

            // Reset UI after submission
            setTimeout(() => {
                withdrawProceedBtn.style.backgroundColor = '#007bff';
                toggleWithdrawInput(); // Collapse the bar
            }, 1500);
        }

        // --- 6. UTILITY/ANIMATION ---

        function updateMultiplierHistory() {
            if (liveMultiplierList.length > 10) {
                liveMultiplierList.pop();
            }
            multiplierListDisplay.textContent = liveMultiplierList.map(m => `${m.toFixed(2)}x`).join(', ');
        }

        /** Moves the plane along the curved path */
        function updatePlanePosition(t) {
            const MAX_X = 90; 
            const MAX_Y = -80; 
            const T_WAVE = FLIGHT_TIME_MAX_SECONDS * 0.75; 

            let x, y, scale;

            if (t < T_WAVE) {
                // Initial Ascent (Smooth, increasing increment)
                const logFactor = Math.log(1 + 5 * t); 
                x = (MAX_X / Math.log(1 + 5 * T_WAVE)) * logFactor;
                y = (MAX_Y / Math.log(1 + 5 * T_WAVE)) * logFactor;
                scale = 1 + t * 0.05;
            } else {
                // Wave Motion (Vertical up/down)
                const t_wave = t - T_WAVE;
                
                // X continues slowly, Y takes wave component
                x = MAX_X + 0.5 * t_wave; 
                y = MAX_Y + (15 * Math.sin(t_wave * 2)); 
                scale = 1.3;
                
                // Bound the horizontal position
                x = Math.min(x, 95); 
            }

            aviatorPlane.style.transform = `translate(${x}vh, ${y}vh) scale(${scale})`; // Using vh for better scaling
        }

        // --- INITIALIZATION ---
        
        document.addEventListener('DOMContentLoaded', () => {
             // Set default stake input value
            stakeInput.value = 10;
            // Add event listener to mirror stake input to bet display
            stakeInput.addEventListener('input', function() {
                document.getElementById('bet-amount-display').textContent = this.value || '0';
            });
        });
        
        // Simulating the Re-login requirement by checking session persistence (simplified)
        window.addEventListener('blur', () => {
            // When the app/tab loses focus, assume logout for security
            if (document.getElementById('game-screen').classList.contains('hidden') === false) {
                clearInterval(gameInterval); // Stop game loop
                // Display login screen again
                document.getElementById('game-screen').classList.add('hidden');
                document.getElementById('login-screen').classList.remove('hidden');
                document.getElementById('initial-prompt').classList.remove('hidden');
                document.getElementById('create-form').classList.add('hidden');
                document.getElementById('login-form').classList.add('hidden');
                alert("Session timed out. Please log in again.");
            }
        });
    </script>
</body>
</html>
